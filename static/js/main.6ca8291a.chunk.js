(this["webpackJsonpkaplan-book-list"]=this["webpackJsonpkaplan-book-list"]||[]).push([[0],{36:function(e,t,o){},37:function(e,t,o){},64:function(e,t,o){"use strict";o.r(t);var n={};o.r(n),o.d(n,"getBookList",(function(){return y})),o.d(n,"getBookListSuccess",(function(){return L})),o.d(n,"toggleNewBookPopup",(function(){return I}));var s=o(0),a=o(7),c=o.n(a),r=(o(36),o(37),o(23)),i=o(24),u=o(31),l=o(29),b=o(1),h=function(e){var t=e.book;return Object(b.jsxs)("div",{className:"book-card",children:[Object(b.jsx)("div",{className:"book-img",children:t.volumeInfo.imageLinks?Object(b.jsx)("img",{src:t.volumeInfo.imageLinks.thumbnail,alt:t.volumeInfo.title+" image"}):Object(b.jsx)("i",{className:"fas fa-book"})}),Object(b.jsxs)("div",{className:"book-data",children:[Object(b.jsxs)("div",{className:"book-title",children:[" ",t.volumeInfo.title," "]}),Object(b.jsxs)("div",{className:"book-author",children:[t.volumeInfo.authors.reduce((function(e,t){return e+" "+t}),"")," "]}),Object(b.jsxs)("div",{className:"book-other",children:[Object(b.jsxs)("div",{children:["Publisher: ",t.volumeInfo.publisher]}),Object(b.jsxs)("div",{children:["Published Date: ",t.volumeInfo.publishedDate]})]})]})]})},d=function(e){return Object(b.jsx)("div",{className:"popup-overlay "+(e.isPopupShow?"":"hidden"),children:Object(b.jsxs)("div",{className:"popup-content",children:[Object(b.jsx)("div",{className:"popup-title",children:e.title}),Object(b.jsx)("span",{className:"close-icon",onClick:e.closePopup,children:Object(b.jsx)("i",{className:"fa fa-times"})}),e.children]})})},p=o(9),j=o(5),f=function(){var e=Object(s.useState)(""),t=Object(p.a)(e,2),o=t[0],n=t[1],a=Object(s.useState)(""),c=Object(p.a)(a,2),r=c[0],i=c[1],u=Object(s.useState)(""),l=Object(p.a)(u,2),h=l[0],d=l[1],f=Object(j.c)();return Object(b.jsxs)("form",{className:"new-book-form",onSubmit:function(e){return function(e){e.preventDefault();var t=Date.now(),s=new Date(t),a="".concat(s.getFullYear(),"-").concat(s.getMonth()+1,"-").concat(s.getDate());f({type:"CREATE_BOOK",data:{id:t,volumeInfo:{title:o,authors:[r],publisher:h,publishedDate:a}}}),f({type:"TOGGLE_CREATE_BOOK",data:!1}),n(""),i(""),d("")}(e)},children:[Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{children:"Title :"}),Object(b.jsx)("input",{value:o,placeholder:"Enter book Title",onChange:function(e){return n(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{children:"Author :"}),Object(b.jsx)("input",{value:r,placeholder:"Enter book Author",onChange:function(e){return i(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{children:"Publisher :"}),Object(b.jsx)("input",{value:h,placeholder:"Enter book Publisher",onChange:function(e){return d(e.target.value)},required:!0})]}),Object(b.jsx)("div",{className:"form-item new-btn-box",children:Object(b.jsx)("button",{type:"submit",className:"submit-btn",children:"Submit"})})]})},m=o(4),O=o(14),v=o.n(O),g=o(26),k=o(27),x=o.n(k),N="GET_BOOK_LIST_SUCCESS",w="GET_BOOK_LIST",S="CREATE_BOOK",B="TOGGLE_CREATE_BOOK",y=function(){return function(){var e=Object(g.a)(v.a.mark((function e(t){var o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("https://www.googleapis.com/books/v1/volumes?q=kaplan%20test%20prep");case 2:o=e.sent,t(L(o.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(e){return{type:N,res:e}},I=function(e){return{type:B,data:e}},P=function(e){Object(u.a)(o,e);var t=Object(l.a)(o);function o(){var e;Object(r.a)(this,o);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={bookList:[],isLoading:!0,isFailed:!1,searchQur:"",isPopupShow:!1},e.getBookList=function(){e.setState({isLoading:!0,isFailed:!1}),e.props.actions.getBookList().then((function(){e.props.items&&e.props.items.length?e.setState({isLoading:!1,isFailed:!1}):e.setState({isLoading:!1,isFailed:!0})}))},e.handleQuery=function(t){var o=t.target.value;o=o.replace(/[-\\/\\^$*+?.()|[\]{}]/g,"\\$&"),e.setState({searchQur:o})},e.filterBooks=function(e,t){var o=new RegExp(t,"ig");return e.filter((function(e){return!!(e.volumeInfo.title&&e.volumeInfo.title.match(o)||e.volumeInfo.publisher&&e.volumeInfo.publisher.match(o)||e.volumeInfo.authors&&e.volumeInfo.authors.length&&e.volumeInfo.authors.reduce((function(e,t){return e+" "+t}),"").match(o))}))},e.toggleCreatePopup=function(){var t=e.props.showNewBookPopup;e.props.actions.toggleNewBookPopup(!t)},e}return Object(i.a)(o,[{key:"componentDidMount",value:function(){this.getBookList()}},{key:"render",value:function(){var e=this,t=this.state,o=t.isLoading,n=t.isFailed,s=t.searchQur,a=this.props,c=a.items,r=a.showNewBookPopup,i=this.filterBooks(c,s);return Object(b.jsxs)("div",{className:"main",children:[Object(b.jsx)("div",{className:"header",children:"Kaplan Book List"}),Object(b.jsxs)("div",{className:"sub-header",children:[Object(b.jsxs)("div",{className:"search-box",children:[Object(b.jsx)("input",{type:"text",placeholder:"Search by title, author, publisher",value:this.state.queryText,onChange:function(t){return e.handleQuery(t)},required:!0,autoFocus:!0}),Object(b.jsx)("button",{value:"Search",children:Object(b.jsx)("i",{className:this.props.isSearching?"fas fa-circle-notch fa-spin":"fas fa-search"})})]}),Object(b.jsx)("div",{className:"new-btn-box",children:Object(b.jsx)("button",{onClick:this.toggleCreatePopup,children:"Create New Book"})})]}),Object(b.jsx)("div",{className:"book-list",children:i.length?i.map((function(e){return Object(b.jsx)(h,{book:e},e.id)})):o?"Loading":n?"Failed":"No data"}),Object(b.jsx)(d,{title:"Create New Book",isPopupShow:r,closePopup:this.toggleCreatePopup,children:Object(b.jsx)(f,{})})]})}}]),o}(s.Component),C=Object(j.b)((function(e){return{items:e.books.items,showNewBookPopup:e.configs.showNewBookPopup}}),(function(e){return{actions:Object(m.b)(n,e)}}))(P);var E,T=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(C,{})})},F=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,65)).then((function(t){var o=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;o(e),n(e),s(e),a(e),c(e)}))},_=o(28),D=function(e){return function(t,o,n){return e((function(e,o){var n,s=performance.now(),a=t(e,o),c=performance.now(),r=(n=c-s,Math.round(100*n)/100);return console.log("reducer process time:",r),a}),o,n)}},A=function(e){return function(t){return function(o){console.group(o.type),console.info("dispatching",o);var n=t(o);return console.log("next state",e.getState()),console.groupEnd(),n}}},K=o(30),q=o(3),G=localStorage.getItem("bookList");try{E=JSON.parse(G)}catch(U){E={}}var J={books:{items:E},showNewBookPopup:!1},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(q.a)({},J.books),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return localStorage.setItem("bookList",JSON.stringify(t.res.items)),Object(q.a)(Object(q.a)({},e),{},{items:t.res.items});case w:return Object(q.a)({},e);case S:var o=[].concat(Object(K.a)(e.items),[Object(q.a)({},t.data)]);return localStorage.setItem("bookList",JSON.stringify(o)),Object(q.a)(Object(q.a)({},e),{},{items:o});default:return e}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(q.a)({},J.configs),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(q.a)(Object(q.a)({},e),{},{showNewBookPopup:t.data});default:return e}},M=Object(m.c)({books:Q,configs:R});var $=function(e){var t=[A,_.a],o=[m.a.apply(void 0,t),D],n=m.d.apply(void 0,o);return Object(m.e)(M,e,n)}({});c.a.render(Object(b.jsx)(j.a,{store:$,children:Object(b.jsx)(T,{})}),document.getElementById("root")),F()}},[[64,1,2]]]);
//# sourceMappingURL=main.6ca8291a.chunk.js.map