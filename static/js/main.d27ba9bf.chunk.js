(this["webpackJsonpkaplan-book-list"]=this["webpackJsonpkaplan-book-list"]||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"getBookList",(function(){return y})),n.d(o,"getBookListSuccess",(function(){return I})),n.d(o,"getUserData",(function(){return L}));var s=n(0),a=n(7),c=n.n(a),i=(n(36),n(37),n(23)),r=n(24),u=n(31),l=n(29),b=n(1),h=function(e){var t=e.book;return Object(b.jsxs)("div",{className:"book-card",children:[Object(b.jsx)("div",{className:"book-img",children:t.volumeInfo.imageLinks?Object(b.jsx)("img",{src:t.volumeInfo.imageLinks.thumbnail,alt:t.volumeInfo.title+" image"}):Object(b.jsx)("i",{className:"fas fa-book"})}),Object(b.jsxs)("div",{className:"book-data",children:[Object(b.jsxs)("div",{className:"book-title",children:[" ",t.volumeInfo.title," "]}),Object(b.jsxs)("div",{className:"book-author",children:[t.volumeInfo.authors.reduce((function(e,t){return e+" "+t}),"")," "]}),Object(b.jsxs)("div",{className:"book-other",children:[Object(b.jsxs)("div",{children:["Publisher: ",t.volumeInfo.publisher]}),Object(b.jsxs)("div",{children:["Published Date: ",t.volumeInfo.publishedDate]})]})]})]})},d=function(e){return Object(b.jsx)("div",{className:"popup-overlay "+(e.isPopupShow?"":"hidden"),children:Object(b.jsxs)("div",{className:"popup-content",children:[Object(b.jsx)("div",{className:"popup-title",children:e.title}),Object(b.jsx)("span",{className:"close-icon",onClick:e.closePopup,children:Object(b.jsx)("i",{className:"fa fa-times"})}),e.children]})})},p=n(9),j=n(5),f=function(){var e=Object(s.useState)(""),t=Object(p.a)(e,2),n=t[0],o=t[1],a=Object(s.useState)(""),c=Object(p.a)(a,2),i=c[0],r=c[1],u=Object(s.useState)(""),l=Object(p.a)(u,2),h=l[0],d=l[1],f=Object(j.c)();return Object(b.jsxs)("form",{className:"new-book-form",onSubmit:function(e){return function(e){e.preventDefault();var t=Date.now(),o=new Date(t),s="".concat(o.getFullYear(),"-").concat(o.getMonth()+1,"-").concat(o.getDate());f({type:"CREATE_BOOK",data:{id:t,volumeInfo:{title:n,authors:[i],publisher:h,publishedDate:s}}})}(e)},children:[Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{children:"Title :"}),Object(b.jsx)("input",{value:n,placeholder:"Enter book Title",onChange:function(e){return o(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{children:"Author :"}),Object(b.jsx)("input",{value:i,placeholder:"Enter book Author",onChange:function(e){return r(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"form-item",children:[Object(b.jsx)("label",{children:"Publisher :"}),Object(b.jsx)("input",{value:h,placeholder:"Enter book Publisher",onChange:function(e){return d(e.target.value)},required:!0})]}),Object(b.jsx)("div",{className:"form-item new-btn-box",children:Object(b.jsx)("button",{type:"submit",className:"submit-btn",children:"Submit"})})]})},m=n(3),v=n(14),O=n.n(v),g=n(26),x=n(27),k=n.n(x),S="GET_BOOK_LIST_SUCCESS",N="GET_BOOK_LIST",w="CREATE_BOOK",y=function(){return function(){var e=Object(g.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("https://www.googleapis.com/books/v1/volumes?q=kaplan%20test%20prep");case 2:n=e.sent,t(I(n.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},I=function(e){return{type:S,res:e}},L=function(e){return{type:N,userId:e}},B=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={bookList:[],isLoading:!0,isFailed:!1,searchQur:"",isPopupShow:!1},e.getBookList=function(){e.setState({isLoading:!0,isFailed:!1}),e.props.actions.getBookList().then((function(){e.props.items&&e.props.items.length?(e.setState({isLoading:!1,isFailed:!1}),localStorage.setItem("bookList",JSON.stringify(e.props.items))):e.setState({isLoading:!1,isFailed:!0})}))},e.handleQuery=function(t){var n=t.target.value;n=n.replace(/[-\\/\\^$*+?.()|[\]{}]/g,"\\$&"),e.setState({searchQur:n})},e.filterBooks=function(e,t){var n=new RegExp(t,"ig");return e.filter((function(e){return!!(e.volumeInfo.title&&e.volumeInfo.title.match(n)||e.volumeInfo.publisher&&e.volumeInfo.publisher.match(n)||e.volumeInfo.authors&&e.volumeInfo.authors.length&&e.volumeInfo.authors.reduce((function(e,t){return e+" "+t}),"").match(n))}))},e.openPopup=function(){e.setState({isPopupShow:!0})},e.closePopup=function(){e.setState({isPopupShow:!1})},e.createBook=function(t){var n=e.state.bookList;n.push(t),e.setState(n),localStorage.setItem("bookList",JSON.stringify(n)),e.closePopup()},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.getBookList()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoading,o=t.isFailed,s=t.isPopupShow,a=t.searchQur,c=this.filterBooks(this.props.items,a);return Object(b.jsxs)("div",{className:"main",children:[Object(b.jsx)("div",{className:"header",children:"Kaplan Book List"}),Object(b.jsxs)("div",{className:"sub-header",children:[Object(b.jsxs)("div",{className:"search-box",children:[Object(b.jsx)("input",{type:"text",placeholder:"Search by title, author, publisher",value:this.state.queryText,onChange:function(t){return e.handleQuery(t)},required:!0,autoFocus:!0}),Object(b.jsx)("button",{value:"Search",children:Object(b.jsx)("i",{className:this.props.isSearching?"fas fa-circle-notch fa-spin":"fas fa-search"})})]}),Object(b.jsx)("div",{className:"new-btn-box",children:Object(b.jsx)("button",{onClick:this.openPopup,children:"Create New Book"})})]}),Object(b.jsx)("div",{className:"book-list",children:c.length?c.map((function(e){return Object(b.jsx)(h,{book:e},e.id)})):n?"Loading":o?"Failed":"No data"}),Object(b.jsx)(d,{title:"Create New Book",isPopupShow:s,closePopup:this.closePopup,children:Object(b.jsx)(f,{createBook:this.createBook})})]})}}]),n}(s.Component),P=Object(j.b)((function(e){return{items:e.books.items}}),(function(e){return{actions:Object(m.b)(o,e)}}))(B);var C,E=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(P,{})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,o=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),o(e),s(e),a(e),c(e)}))},T=n(28),D=function(e){return function(t,n,o){return e((function(e,n){var o,s=performance.now(),a=t(e,n),c=performance.now(),i=(o=c-s,Math.round(100*o)/100);return console.log("reducer process time:",i),a}),n,o)}},_=function(e){return function(t){return function(n){console.group(n.type),console.info("dispatching",n);var o=t(n);return console.log("next state",e.getState()),console.groupEnd(),o}}},q=n(30),A=n(4),J=localStorage.getItem("bookList");try{C=JSON.parse(J)}catch(G){C={}}var K={books:{items:C}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(A.a)({},K.books),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(A.a)(Object(A.a)({},e),{},{items:t.res.items});case N:return Object(A.a)({},e);case w:return Object(A.a)(Object(A.a)({},e),{},{items:[].concat(Object(q.a)(e.items),[Object(A.a)({},t.data)])});default:return e}},M=Object(m.c)({books:Q});var R=function(e){var t=[_,T.a],n=[m.a.apply(void 0,t),D],o=m.d.apply(void 0,n);return Object(m.e)(M,e,o)}({});c.a.render(Object(b.jsx)(j.a,{store:R,children:Object(b.jsx)(E,{})}),document.getElementById("root")),F()}},[[64,1,2]]]);
//# sourceMappingURL=main.d27ba9bf.chunk.js.map